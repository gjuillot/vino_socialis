
<table>
  <% (0..(rows - 1)).each do |row| %>
    <% shorten_row = (rows - row).even? %> 
    <tr>
      <td>
        <%= "#{letter}.#{row}" %>&nbsp;
      </td>
      <% (0..(columns - (shorten_row ? 2 : 1))).each do |column| %>
        <td>
          <% position = compartment[row][column] %>
          <% if position %>
            <%= wine_color_image(position.bottle.wine, false) %>
          <% else %>
            <%= link_to no_wine_color_image(shorten_row ? '7' : '0'), apply_place_wine_rack_path(@wine_rack, :bottle => @bottle, :total_row => total_row, :total_column => total_column, :row => row, :column => column) %>
          <% end %> 
        </td>
      <% end %>
    </tr>
  <% end %>
</table>